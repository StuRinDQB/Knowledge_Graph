<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tool Workflow Knowledge Graph</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.21.0/cytoscape.min.js"></script>
  <style>
    #cy {
      width: 100%;
      height: 800px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1 style="text-align: center;">Tool Workflow Knowledge Graph</h1>
  <div id="cy"></div>

  <script>
    // 从文件加载 Cytoscape 数据
    fetch("cytoscape_merged_data.json")
      .then(response => response.json())
      .then(data => {
        // 初始化 Cytoscape 图谱
        var cy = cytoscape({
          container: document.getElementById('cy'),
          elements: data,
          style: [
            // 节点样式
            {
              selector: 'node',
              style: {
                'background-color': '#0288d1', // 节点颜色
                'label': 'data(label)',       // 显示节点的标签
                'text-valign': 'center',
                'text-halign': 'center',
                'color': '#fff',              // 节点标签颜色
                'width': '80px',              // 节点宽度
                'height': '80px',             // 节点高度
                'font-size': '14px',          // 标签字体大小
                'border-width': 3,            // 节点边框宽度
                'border-color': '#004d40'     // 节点边框颜色
              }
            },
            // 边样式
            {
              selector: 'edge',
              style: {
                'width': 4,                   // 边的宽度
                'line-color': '#8e44ad',      // 边的颜色
                'target-arrow-color': '#8e44ad', // 箭头颜色
                'target-arrow-shape': 'triangle', // 箭头形状
                'curve-style': 'bezier',
                'label': 'data(label)',       // 显示边的标签
                'font-size': '12px',          // 标签字体大小
                'color': '#333',              // 标签颜色
                'text-outline-color': '#fff', // 标签背景色（提高可读性）
                'text-outline-width': 2       // 标签背景厚度
              }
            }
          ],
          layout: {
            name: 'concentric',              // 使用同心圆布局
            concentric: function( node ){
              return node.degree();          // 按节点连接数分层
            },
            levelWidth: function( nodes ){
              return 2;                      // 每层宽度
            },
            padding: 10                      // 图形内边距
          }
        });

        // 为节点添加鼠标交互效果
        cy.on('tap', 'node', function(evt) {
          var node = evt.target;
          alert('You clicked on node: ' + node.data('label'));
        });
      });
  </script>
</body>
</html>
